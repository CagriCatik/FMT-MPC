<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the Fast Marching Tree planning, control, and simulation stack."><link rel=prev href=02_system_architecture.html><link rel=next href=04_simulation_and_visualization.html><link rel=icon href=None><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.35"><title>Planning & Control - FMT-MPC</title><link rel=stylesheet href=assets/stylesheets/main.35f28582.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#planning-and-control class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=index.html title=FMT-MPC class="md-header__button md-logo" aria-label=FMT-MPC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FMT-MPC </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Planning & Control </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_0> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/CagriCatik/FMT-MPC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=index.html title=FMT-MPC class="md-nav__button md-logo" aria-label=FMT-MPC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> FMT-MPC </label> <div class=md-nav__source> <a href=https://github.com/CagriCatik/FMT-MPC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=01_introduction.html class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=02_system_architecture.html class=md-nav__link> <span class=md-ellipsis> System Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Planning & Control </span> <span class="md-nav__icon md-icon"></span> </label> <a href=03_planning_and_control.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Planning & Control </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#1-fmt-planner class=md-nav__link> <span class=md-ellipsis> 1. FMT Planner </span> </a> <nav class=md-nav aria-label="1. FMT Planner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-mathematical-foundation class=md-nav__link> <span class=md-ellipsis> 1.1. Mathematical Foundation </span> </a> </li> <li class=md-nav__item> <a href=#12-safety-aware-space-inflation class=md-nav__link> <span class=md-ellipsis> 1.2. Safety-Aware Space Inflation </span> </a> </li> <li class=md-nav__item> <a href=#13-algorithmic-stages class=md-nav__link> <span class=md-ellipsis> 1.3. Algorithmic Stages </span> </a> <nav class=md-nav aria-label="1.3. Algorithmic Stages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#131-sampling class=md-nav__link> <span class=md-ellipsis> 1.3.1. Sampling </span> </a> </li> <li class=md-nav__item> <a href=#132-tree-growth class=md-nav__link> <span class=md-ellipsis> 1.3.2. Tree Growth </span> </a> </li> <li class=md-nav__item> <a href=#133-rewiring-and-pruning class=md-nav__link> <span class=md-ellipsis> 1.3.3. Rewiring and Pruning </span> </a> </li> <li class=md-nav__item> <a href=#134-corridor-validation class=md-nav__link> <span class=md-ellipsis> 1.3.4. Corridor Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-computational-notes class=md-nav__link> <span class=md-ellipsis> 1.4. Computational Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-path-smoothing class=md-nav__link> <span class=md-ellipsis> 2. Path Smoothing </span> </a> <nav class=md-nav aria-label="2. Path Smoothing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-motivation class=md-nav__link> <span class=md-ellipsis> 2.1. Motivation </span> </a> </li> <li class=md-nav__item> <a href=#22-formulation class=md-nav__link> <span class=md-ellipsis> 2.2. Formulation </span> </a> </li> <li class=md-nav__item> <a href=#23-sampling-and-safety-revalidation class=md-nav__link> <span class=md-ellipsis> 2.3. Sampling and Safety Revalidation </span> </a> </li> <li class=md-nav__item> <a href=#24-output-properties class=md-nav__link> <span class=md-ellipsis> 2.4. Output Properties </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-mpc-tracker class=md-nav__link> <span class=md-ellipsis> 3. MPC Tracker </span> </a> <nav class=md-nav aria-label="3. MPC Tracker"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-kinematic-bicycle-model class=md-nav__link> <span class=md-ellipsis> 3.1. Kinematic Bicycle Model </span> </a> </li> <li class=md-nav__item> <a href=#32-optimal-control-problem class=md-nav__link> <span class=md-ellipsis> 3.2. Optimal Control Problem </span> </a> </li> <li class=md-nav__item> <a href=#33-execution-and-receding-horizon class=md-nav__link> <span class=md-ellipsis> 3.3. Execution and Receding Horizon </span> </a> </li> <li class=md-nav__item> <a href=#34-numerical-stability-and-solver-implementation class=md-nav__link> <span class=md-ellipsis> 3.4. Numerical Stability and Solver Implementation </span> </a> </li> <li class=md-nav__item> <a href=#35-visualization-and-logging class=md-nav__link> <span class=md-ellipsis> 3.5. Visualization and Logging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-summary class=md-nav__link> <span class=md-ellipsis> 4. Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=04_simulation_and_visualization.html class=md-nav__link> <span class=md-ellipsis> Simulation & Visualisation </span> </a> </li> <li class=md-nav__item> <a href=05_configuration_and_cli.html class=md-nav__link> <span class=md-ellipsis> Configuration & CLI </span> </a> </li> <li class=md-nav__item> <a href=06_results.html class=md-nav__link> <span class=md-ellipsis> Results </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#1-fmt-planner class=md-nav__link> <span class=md-ellipsis> 1. FMT Planner </span> </a> <nav class=md-nav aria-label="1. FMT Planner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#11-mathematical-foundation class=md-nav__link> <span class=md-ellipsis> 1.1. Mathematical Foundation </span> </a> </li> <li class=md-nav__item> <a href=#12-safety-aware-space-inflation class=md-nav__link> <span class=md-ellipsis> 1.2. Safety-Aware Space Inflation </span> </a> </li> <li class=md-nav__item> <a href=#13-algorithmic-stages class=md-nav__link> <span class=md-ellipsis> 1.3. Algorithmic Stages </span> </a> <nav class=md-nav aria-label="1.3. Algorithmic Stages"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#131-sampling class=md-nav__link> <span class=md-ellipsis> 1.3.1. Sampling </span> </a> </li> <li class=md-nav__item> <a href=#132-tree-growth class=md-nav__link> <span class=md-ellipsis> 1.3.2. Tree Growth </span> </a> </li> <li class=md-nav__item> <a href=#133-rewiring-and-pruning class=md-nav__link> <span class=md-ellipsis> 1.3.3. Rewiring and Pruning </span> </a> </li> <li class=md-nav__item> <a href=#134-corridor-validation class=md-nav__link> <span class=md-ellipsis> 1.3.4. Corridor Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-computational-notes class=md-nav__link> <span class=md-ellipsis> 1.4. Computational Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-path-smoothing class=md-nav__link> <span class=md-ellipsis> 2. Path Smoothing </span> </a> <nav class=md-nav aria-label="2. Path Smoothing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-motivation class=md-nav__link> <span class=md-ellipsis> 2.1. Motivation </span> </a> </li> <li class=md-nav__item> <a href=#22-formulation class=md-nav__link> <span class=md-ellipsis> 2.2. Formulation </span> </a> </li> <li class=md-nav__item> <a href=#23-sampling-and-safety-revalidation class=md-nav__link> <span class=md-ellipsis> 2.3. Sampling and Safety Revalidation </span> </a> </li> <li class=md-nav__item> <a href=#24-output-properties class=md-nav__link> <span class=md-ellipsis> 2.4. Output Properties </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-mpc-tracker class=md-nav__link> <span class=md-ellipsis> 3. MPC Tracker </span> </a> <nav class=md-nav aria-label="3. MPC Tracker"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-kinematic-bicycle-model class=md-nav__link> <span class=md-ellipsis> 3.1. Kinematic Bicycle Model </span> </a> </li> <li class=md-nav__item> <a href=#32-optimal-control-problem class=md-nav__link> <span class=md-ellipsis> 3.2. Optimal Control Problem </span> </a> </li> <li class=md-nav__item> <a href=#33-execution-and-receding-horizon class=md-nav__link> <span class=md-ellipsis> 3.3. Execution and Receding Horizon </span> </a> </li> <li class=md-nav__item> <a href=#34-numerical-stability-and-solver-implementation class=md-nav__link> <span class=md-ellipsis> 3.4. Numerical Stability and Solver Implementation </span> </a> </li> <li class=md-nav__item> <a href=#35-visualization-and-logging class=md-nav__link> <span class=md-ellipsis> 3.5. Visualization and Logging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#4-summary class=md-nav__link> <span class=md-ellipsis> 4. Summary </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/CagriCatik/FMT-MPC/edit/master/docs/03_planning_and_control.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=planning-and-control>Planning and Control<a class=headerlink href=#planning-and-control title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>This document provides a comprehensive and scientific explanation of the <strong>Planning and Control</strong> module, which integrates the <strong>Fast Marching Tree (FMT) planner</strong>, a <strong>curvature-continuous smoothing pipeline</strong>, and a <strong>Model Predictive Control (MPC) tracker</strong>. The system enables efficient motion planning and robust trajectory tracking for ground vehicles operating in static environments represented by occupancy grids. The design emphasizes algorithmic rigor, numerical stability, and safety guarantees.</p> <hr> <h2 id=1-fmt-planner>1. FMT Planner<a class=headerlink href=#1-fmt-planner title="Permanent link">&para;</a></h2> <h3 id=11-mathematical-foundation>1.1. Mathematical Foundation<a class=headerlink href=#11-mathematical-foundation title="Permanent link">&para;</a></h3> <p>The <strong>Fast Marching Tree (FMT)</strong> planner is a sampling-based algorithm that computes approximately optimal paths in continuous configuration spaces. It operates on an inflated occupancy grid to ensure a fixed safety buffer around obstacles.</p> <p>Let:</p> <ul> <li><span class=arithmatex>\(\mathcal{X}_{\mathrm{free}} \subset \mathbb{R}^d\)</span>: free configuration space.</li> <li><span class=arithmatex>\(n\)</span>: number of sampled configurations.</li> <li><span class=arithmatex>\(r_n\)</span>: connection radius.</li> <li><span class=arithmatex>\(\gamma &gt; 1\)</span>: tunable graph density constant.</li> </ul> <p>The connection radius follows the asymptotically optimal scaling law:</p> <div class=arithmatex>\[ r_n = \gamma \left(\frac{\log n}{n}\right)^{1/d}. \]</div> <p>For <span class=arithmatex>\(d = 2\)</span>, this ensures probabilistic completeness and asymptotic optimality under mild assumptions on the environment’s geometry.</p> <h3 id=12-safety-aware-space-inflation>1.2. Safety-Aware Space Inflation<a class=headerlink href=#12-safety-aware-space-inflation title="Permanent link">&para;</a></h3> <p>The occupancy grid consists of:</p> <ul> <li><span class=arithmatex>\(\mathcal{O}\)</span>: binary obstacle bitmap.</li> <li><span class=arithmatex>\(\mathcal{I}\)</span>: inflated bitmap obtained by morphological dilation with radius <span class=arithmatex>\(\delta\)</span>.</li> </ul> <p>The inflation radius <span class=arithmatex>\(\delta\)</span> defines a clearance constraint:</p> <div class=arithmatex>\[ d_{\mathrm{obs}}(x_i) &gt; \delta, \]</div> <p>where <span class=arithmatex>\(d_{\mathrm{obs}}\)</span> is the Euclidean distance transform of the obstacle layer. This ensures the planner rejects any samples violating the safety margin.</p> <h3 id=13-algorithmic-stages>1.3. Algorithmic Stages<a class=headerlink href=#13-algorithmic-stages title="Permanent link">&para;</a></h3> <p>The planner operates through four deterministic phases:</p> <pre class=mermaid><code>graph TD
    A[Sample Free Space] --&gt; B[Prune Colliding Nodes]
    B --&gt; C[Grow Goal-Biased Tree]
    C --&gt; D[Rewire for Shorter Paths]
    D --&gt; E[Validate Corridor]
    E --&gt; F[Smooth Path]</code></pre> <h4 id=131-sampling>1.3.1. Sampling<a class=headerlink href=#131-sampling title="Permanent link">&para;</a></h4> <p>Uniform and goal-biased random samples are generated in <span class=arithmatex>\(\mathcal{X}_{\mathrm{free}}\)</span>. A fixed random seed ensures repeatability across runs.</p> <h4 id=132-tree-growth>1.3.2. Tree Growth<a class=headerlink href=#132-tree-growth title="Permanent link">&para;</a></h4> <p>At each iteration:</p> <ul> <li>The frontier node <span class=arithmatex>\(x\)</span> with the minimum accumulated cost is selected.</li> <li>All candidate nodes <span class=arithmatex>\(y\)</span> within distance <span class=arithmatex>\(r_n\)</span> are inspected:</li> </ul> <p>$$ \lVert x - y \rVert_2 \le r_n. $$</p> <ul> <li>The edge <span class=arithmatex>\((x, y)\)</span> is accepted only if the discretized segment satisfies</li> </ul> <p>$$ d_{\mathrm{obs}}(s) &gt; \delta, \quad \forall s \in [x, y]. $$</p> <p>This check ensures no part of the connection crosses inflated obstacles.</p> <h4 id=133-rewiring-and-pruning>1.3.3. Rewiring and Pruning<a class=headerlink href=#133-rewiring-and-pruning title="Permanent link">&para;</a></h4> <p>If a newly discovered path offers a lower cumulative cost, the tree rewires the parent relationship of the node, reducing the path length and improving the optimality bound as <span class=arithmatex>\(n \to \infty\)</span>.</p> <h4 id=134-corridor-validation>1.3.4. Corridor Validation<a class=headerlink href=#134-corridor-validation title="Permanent link">&para;</a></h4> <p>After initial path generation, the planner validates the smoothed path’s adherence to the inflated corridor. If a violation occurs, the system falls back to the unsmoothed waypoint chain, maintaining safety guarantees.</p> <h3 id=14-computational-notes>1.4. Computational Notes<a class=headerlink href=#14-computational-notes title="Permanent link">&para;</a></h3> <ul> <li>Each node stores cumulative cost, parent index, and clearance metadata.</li> <li>The FMT expansion uses a min-heap for cost ordering, ensuring <span class=arithmatex>\(O(n \log n)\)</span> complexity.</li> <li>Visualization and logging record both successful and rejected connections for diagnostic and reproducibility purposes.</li> </ul> <hr> <h2 id=2-path-smoothing>2. Path Smoothing<a class=headerlink href=#2-path-smoothing title="Permanent link">&para;</a></h2> <h3 id=21-motivation>2.1. Motivation<a class=headerlink href=#21-motivation title="Permanent link">&para;</a></h3> <p>The raw waypoint path generated by FMT lacks curvature continuity, which can destabilize model-based controllers. A smoothing stage based on <strong>centripetal Catmull–Rom splines</strong> creates a differentiable path suitable for feedforward control and preview-based tracking.</p> <h3 id=22-formulation>2.2. Formulation<a class=headerlink href=#22-formulation title="Permanent link">&para;</a></h3> <p>Given waypoints <span class=arithmatex>\(\{ p_i \}_{i=0}^N\)</span>, the parameterization uses centripetal spacing:</p> <div class=arithmatex>\[ t_{i+1} = t_i + \lVert p_{i+1} - p_i \rVert_2^{\alpha}, \quad \alpha = \tfrac{1}{2}. \]</div> <p>This reduces oscillations near sharp corners and avoids overshooting, a known issue with uniform parameterizations.</p> <h3 id=23-sampling-and-safety-revalidation>2.3. Sampling and Safety Revalidation<a class=headerlink href=#23-sampling-and-safety-revalidation title="Permanent link">&para;</a></h3> <p>The spline is resampled at constant arc-length increments <span class=arithmatex>\(\Delta s\)</span>, producing <span class=arithmatex>\(\{ \tilde{p}_j \}_{j=0}^M\)</span>. Each interpolated point is checked against the distance field:</p> <div class=arithmatex>\[ d_{\mathrm{obs}}(\tilde{p}_j) &gt; \delta. \]</div> <p>If violations occur, points are clipped to the valid configuration space. This guarantees geometric feasibility post-smoothing.</p> <h3 id=24-output-properties>2.4. Output Properties<a class=headerlink href=#24-output-properties title="Permanent link">&para;</a></h3> <ul> <li><strong>Continuity:</strong> <span class=arithmatex>\(C^1\)</span> continuity in position and heading.</li> <li><strong>Differentiability:</strong> Required for curvature and velocity computation.</li> <li><strong>Bounded curvature:</strong> Enables stable reference generation for the MPC.</li> </ul> <hr> <h2 id=3-mpc-tracker>3. MPC Tracker<a class=headerlink href=#3-mpc-tracker title="Permanent link">&para;</a></h2> <h3 id=31-kinematic-bicycle-model>3.1. Kinematic Bicycle Model<a class=headerlink href=#31-kinematic-bicycle-model title="Permanent link">&para;</a></h3> <p>The tracking controller employs the <strong>linearized kinematic bicycle model</strong>. Let the state vector be:</p> <div class=arithmatex>\[ x = [e_y, e_\psi, v, \kappa]^\top, \]</div> <p>and control vector:</p> <div class=arithmatex>\[ u = [a, \dot{\delta}]^\top, \]</div> <p>where:</p> <ul> <li><span class=arithmatex>\(e_y\)</span>: lateral offset error,</li> <li><span class=arithmatex>\(e_\psi\)</span>: heading error,</li> <li><span class=arithmatex>\(v\)</span>: longitudinal velocity,</li> <li><span class=arithmatex>\(\kappa\)</span>: curvature,</li> <li><span class=arithmatex>\(a\)</span>: acceleration input,</li> <li><span class=arithmatex>\(\dot{\delta}\)</span>: steering rate input.</li> </ul> <p>The discrete linearized dynamics are:</p> <div class=arithmatex>\[ x_{k+1} = A_k x_k + B_k u_k + c_k, \]</div> <p>where <span class=arithmatex>\(A_k\)</span> and <span class=arithmatex>\(B_k\)</span> are Jacobians computed at the current reference state, and <span class=arithmatex>\(c_k\)</span> accounts for affine offsets from linearization.</p> <h3 id=32-optimal-control-problem>3.2. Optimal Control Problem<a class=headerlink href=#32-optimal-control-problem title="Permanent link">&para;</a></h3> <p>The MPC minimizes a quadratic cost function over a finite horizon <span class=arithmatex>\(H\)</span>:</p> <div class=arithmatex>\[ \begin{aligned} \min_{x_{0:H},\,u_{0:H-1}} \quad &amp; \sum_{k=0}^{H} \lVert x_k - x_k^{\mathrm{ref}} \rVert_Q^2 + \sum_{k=0}^{H-1} \lVert u_k - u_k^{\mathrm{ref}} \rVert_R^2 \\n\text{s.t.} \quad &amp; x_{k+1} = A_k x_k + B_k u_k + c_k, \\n&amp; v_{\min} \le v_k \le v_{\max}, \\n&amp; |\delta_k| \le \delta_{\max}, \\n&amp; |\dot{\delta}_k| \le \dot{\delta}_{\max}, \\n&amp; x_0 = x_{\mathrm{meas}}. \end{aligned} \]</div> <p>Here:</p> <ul> <li><span class=arithmatex>\(Q\)</span> and <span class=arithmatex>\(R\)</span> are positive definite weighting matrices.</li> <li><span class=arithmatex>\(x_k^{\mathrm{ref}}\)</span> and <span class=arithmatex>\(u_k^{\mathrm{ref}}\)</span> are derived from the smoothed spline.</li> <li>Constraints ensure dynamic feasibility and actuator safety.</li> </ul> <h3 id=33-execution-and-receding-horizon>3.3. Execution and Receding Horizon<a class=headerlink href=#33-execution-and-receding-horizon title="Permanent link">&para;</a></h3> <p>Only the first optimal control <span class=arithmatex>\(u_0^*\)</span> is applied. The process repeats at every sampling step, re-linearizing and resolving the optimization. This <strong>receding-horizon strategy</strong> provides feedback correction against disturbances and modeling errors.</p> <h3 id=34-numerical-stability-and-solver-implementation>3.4. Numerical Stability and Solver Implementation<a class=headerlink href=#34-numerical-stability-and-solver-implementation title="Permanent link">&para;</a></h3> <ul> <li>The QP is solved using a dense active-set or interior-point method (e.g., qpOASES or OSQP).</li> <li>Jacobians are updated incrementally for real-time feasibility.</li> <li>Constraints are enforced via inequality matrices <span class=arithmatex>\(Gx \le h\)</span>.</li> </ul> <h3 id=35-visualization-and-logging>3.5. Visualization and Logging<a class=headerlink href=#35-visualization-and-logging title="Permanent link">&para;</a></h3> <p>During operation:</p> <ul> <li>Predicted horizons <span class=arithmatex>\(\{x_k\}_{k=0}^{H}\)</span> are visualized as green dashed lines.</li> <li>Logs capture solver iterations, constraint activations, and state deviations.</li> <li>All planner and controller metrics are timestamped for post-run correlation.</li> </ul> <hr> <h2 id=4-summary>4. Summary<a class=headerlink href=#4-summary title="Permanent link">&para;</a></h2> <p>The integrated pipeline ensures:</p> <ol> <li><strong>Theoretical optimality:</strong> via FMT’s asymptotic convergence.</li> <li><strong>Geometric safety:</strong> through inflated obstacle handling and revalidation.</li> <li><strong>Smooth, differentiable paths:</strong> ensuring controller compatibility.</li> <li><strong>Dynamic feasibility:</strong> via constrained MPC optimization.</li> </ol> <p>The result is a modular, scientifically grounded motion planning and control framework suitable for autonomous vehicle simulation and deployment.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 30, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 30, 2025</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/example/rrtstar_mpc_motion_planning target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["navigation.sections", "navigation.top", "content.code.copy", "content.action.edit"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.56dfad97.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js></script> <script src=assets/js/math-init.js></script> </body> </html>