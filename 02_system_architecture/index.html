<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the Fast Marching Tree planning, control, and simulation stack."><link href=../01_introduction/ rel=prev><link href=../03_planning_and_control/ rel=next><link rel=icon href=../None><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.35"><title>System Architecture - FMT-MPC</title><link rel=stylesheet href=../assets/stylesheets/main.35f28582.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#system-architecture class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=FMT-MPC class="md-header__button md-logo" aria-label=FMT-MPC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> FMT-MPC </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> System Architecture </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/CagriCatik/FMT-MPC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=FMT-MPC class="md-nav__button md-logo" aria-label=FMT-MPC data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> FMT-MPC </label> <div class=md-nav__source> <a href=https://github.com/CagriCatik/FMT-MPC title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../01_introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> System Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> System Architecture </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#1-data-flow-overview class=md-nav__link> <span class=md-ellipsis> 1. Data Flow Overview </span> </a> </li> <li class=md-nav__item> <a href=#2-core-modules class=md-nav__link> <span class=md-ellipsis> 2. Core Modules </span> </a> <nav class=md-nav aria-label="2. Core Modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-configuration-srccommonconfigpy class=md-nav__link> <span class=md-ellipsis> 2.1. Configuration (src/common/config.py) </span> </a> </li> <li class=md-nav__item> <a href=#22-mapping-srcmapping class=md-nav__link> <span class=md-ellipsis> 2.2. Mapping (src/mapping/) </span> </a> </li> <li class=md-nav__item> <a href=#23-planning-srcplanningfmt_plannerpy class=md-nav__link> <span class=md-ellipsis> 2.3. Planning (src/planning/fmt_planner.py) </span> </a> </li> <li class=md-nav__item> <a href=#24-trajectory-smoothing-srctrackingmpc_trackerpy-and-intermediary-smoothing-stage class=md-nav__link> <span class=md-ellipsis> 2.4. Trajectory Smoothing (src/tracking/mpc_tracker.py and intermediary smoothing stage) </span> </a> </li> <li class=md-nav__item> <a href=#25-tracking-srctrackingmpc_trackerpy class=md-nav__link> <span class=md-ellipsis> 2.5. Tracking (src/tracking/mpc_tracker.py) </span> </a> </li> <li class=md-nav__item> <a href=#26-vehicle-model-srcvehiclebicyclepy class=md-nav__link> <span class=md-ellipsis> 2.6. Vehicle Model (src/vehicle/bicycle.py) </span> </a> </li> <li class=md-nav__item> <a href=#27-simulation-srcsimsimulatorpy class=md-nav__link> <span class=md-ellipsis> 2.7. Simulation (src/sim/simulator.py) </span> </a> </li> <li class=md-nav__item> <a href=#28-visualization-srcvis class=md-nav__link> <span class=md-ellipsis> 2.8. Visualization (src/vis/) </span> </a> </li> <li class=md-nav__item> <a href=#29-logging-srccommonlogging_utilspy class=md-nav__link> <span class=md-ellipsis> 2.9. Logging (src/common/logging_utils.py) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-testing-and-validation class=md-nav__link> <span class=md-ellipsis> 3. Testing and Validation </span> </a> </li> <li class=md-nav__item> <a href=#4-summary class=md-nav__link> <span class=md-ellipsis> 4. Summary </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../03_planning_and_control/ class=md-nav__link> <span class=md-ellipsis> Planning & Control </span> </a> </li> <li class=md-nav__item> <a href=../04_simulation_and_visualization/ class=md-nav__link> <span class=md-ellipsis> Simulation & Visualisation </span> </a> </li> <li class=md-nav__item> <a href=../05_configuration_and_cli/ class=md-nav__link> <span class=md-ellipsis> Configuration & CLI </span> </a> </li> <li class=md-nav__item> <a href=../06_results/ class=md-nav__link> <span class=md-ellipsis> Results </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#1-data-flow-overview class=md-nav__link> <span class=md-ellipsis> 1. Data Flow Overview </span> </a> </li> <li class=md-nav__item> <a href=#2-core-modules class=md-nav__link> <span class=md-ellipsis> 2. Core Modules </span> </a> <nav class=md-nav aria-label="2. Core Modules"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21-configuration-srccommonconfigpy class=md-nav__link> <span class=md-ellipsis> 2.1. Configuration (src/common/config.py) </span> </a> </li> <li class=md-nav__item> <a href=#22-mapping-srcmapping class=md-nav__link> <span class=md-ellipsis> 2.2. Mapping (src/mapping/) </span> </a> </li> <li class=md-nav__item> <a href=#23-planning-srcplanningfmt_plannerpy class=md-nav__link> <span class=md-ellipsis> 2.3. Planning (src/planning/fmt_planner.py) </span> </a> </li> <li class=md-nav__item> <a href=#24-trajectory-smoothing-srctrackingmpc_trackerpy-and-intermediary-smoothing-stage class=md-nav__link> <span class=md-ellipsis> 2.4. Trajectory Smoothing (src/tracking/mpc_tracker.py and intermediary smoothing stage) </span> </a> </li> <li class=md-nav__item> <a href=#25-tracking-srctrackingmpc_trackerpy class=md-nav__link> <span class=md-ellipsis> 2.5. Tracking (src/tracking/mpc_tracker.py) </span> </a> </li> <li class=md-nav__item> <a href=#26-vehicle-model-srcvehiclebicyclepy class=md-nav__link> <span class=md-ellipsis> 2.6. Vehicle Model (src/vehicle/bicycle.py) </span> </a> </li> <li class=md-nav__item> <a href=#27-simulation-srcsimsimulatorpy class=md-nav__link> <span class=md-ellipsis> 2.7. Simulation (src/sim/simulator.py) </span> </a> </li> <li class=md-nav__item> <a href=#28-visualization-srcvis class=md-nav__link> <span class=md-ellipsis> 2.8. Visualization (src/vis/) </span> </a> </li> <li class=md-nav__item> <a href=#29-logging-srccommonlogging_utilspy class=md-nav__link> <span class=md-ellipsis> 2.9. Logging (src/common/logging_utils.py) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#3-testing-and-validation class=md-nav__link> <span class=md-ellipsis> 3. Testing and Validation </span> </a> </li> <li class=md-nav__item> <a href=#4-summary class=md-nav__link> <span class=md-ellipsis> 4. Summary </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/CagriCatik/FMT-MPC/edit/master/docs/02_system_architecture.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1 id=system-architecture>System Architecture<a class=headerlink href=#system-architecture title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The repository implements a modular and scientifically rigorous architecture for autonomous vehicle planning, control, and simulation. Each subsystem—mapping, planning, vehicle dynamics, optimization, visualization, and logging—resides in an isolated package with a well-defined interface. This compartmentalization ensures component-level replaceability, minimal coupling, and deterministic reproducibility across simulations.</p> <p>The system is designed around <strong>data-driven configuration</strong>, <strong>clear inter-module contracts</strong>, and <strong>reproducible computation</strong>, enabling users to modify planners, vehicle models, or visualization components without affecting the rest of the framework.</p> <hr> <h2 id=1-data-flow-overview>1. Data Flow Overview<a class=headerlink href=#1-data-flow-overview title="Permanent link">&para;</a></h2> <p>The overall pipeline follows a sequential yet modular execution chain, depicted below:</p> <pre class=mermaid><code>graph LR
    A[Scenario YAML] --&gt; B[Configuration Loader]
    B --&gt; C[Mapping]
    C --&gt; D[FMT Planner]
    D --&gt; E[Trajectory Smoother]
    E --&gt; F[MPC Tracker]
    F --&gt; G[Simulator]
    G --&gt; H[Visualisation]
    H --&gt; I[Artifacts]</code></pre> <p>Each stage transforms structured inputs into typed outputs that serve as inputs to subsequent modules. The interfaces are implemented via typed dataclasses and explicit contracts, ensuring static consistency and runtime integrity.</p> <hr> <h2 id=2-core-modules>2. Core Modules<a class=headerlink href=#2-core-modules title="Permanent link">&para;</a></h2> <h3 id=21-configuration-srccommonconfigpy>2.1. Configuration (<code>src/common/config.py</code>)<a class=headerlink href=#21-configuration-srccommonconfigpy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Define and validate simulation and system parameters from YAML scenario files.</p> <p><strong>Technical details:</strong></p> <ul> <li>Uses <strong>Python dataclasses</strong> with strict type annotations for every parameter.</li> <li>Validates field structures and permissible ranges.</li> <li>Seeds all pseudo-random number generators (<code>numpy</code>, <code>random</code>, etc.) to ensure deterministic sampling and reproducible randomization in planning.</li> <li>Provides bidirectional mapping between YAML schema and runtime configuration objects.</li> <li>Comprehensive docstrings establish explicit configuration contracts.</li> </ul> <p><strong>Outcome:</strong> Guarantees repeatable experiments, stable parameter propagation, and clear traceability between YAML scenarios and code execution.</p> <hr> <h3 id=22-mapping-srcmapping>2.2. Mapping (<code>src/mapping/</code>)<a class=headerlink href=#22-mapping-srcmapping title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Generate and preprocess the environment representation for the planner.</p> <p><strong>Processing steps:</strong></p> <ol> <li>Loads binary <strong>occupancy grids</strong> from deterministic specifications or bitmap images (PNG format).</li> <li>Applies <strong>morphological inflation</strong> using OpenCV to construct inflated obstacle maps that maintain safety margins around physical obstacles.</li> <li>Computes <strong>Euclidean distance transforms</strong>, yielding a scalar field <span class=arithmatex>\(d_{\mathrm{obs}}(x)\)</span> that encodes clearance from obstacles at every grid cell.</li> </ol> <p><strong>Outputs:</strong></p> <ul> <li>Original occupancy map <span class=arithmatex>\(\mathcal{O}\)</span></li> <li>Inflated map <span class=arithmatex>\(\mathcal{I}\)</span></li> <li>Continuous distance field for clearance evaluation.</li> </ul> <p><strong>Scientific role:</strong> Enables consistent safety evaluation and real-time feasibility checking during planning and simulation.</p> <hr> <h3 id=23-planning-srcplanningfmt_plannerpy>2.3. Planning (<code>src/planning/fmt_planner.py</code>)<a class=headerlink href=#23-planning-srcplanningfmt_plannerpy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Compute collision-free, near-optimal reference paths through the configuration space.</p> <p><strong>Key features:</strong></p> <ul> <li>Implements <strong>Fast Marching Tree (FMT*)</strong> algorithm for asymptotically optimal path planning.</li> <li>Samples free configurations from <span class=arithmatex>\(\mathcal{X}_{\mathrm{free}}\)</span> with <strong>goal biasing</strong> to accelerate convergence.</li> <li>Connects nodes within a radius <span class=arithmatex>\(r_n = \gamma (\log n / n)^{1/d}\)</span>, following theoretical optimality bounds.</li> <li>Validates edges using the inflated safety corridor and the precomputed distance transform.</li> <li>Records exploration statistics, including rejected edges, accepted nodes, and computational time.</li> </ul> <p><strong>Scientific significance:</strong> Balances computational efficiency with formal asymptotic guarantees, enabling rigorous comparison across runs.</p> <hr> <h3 id=24-trajectory-smoothing-srctrackingmpc_trackerpy-and-intermediary-smoothing-stage>2.4. Trajectory Smoothing (<code>src/tracking/mpc_tracker.py</code> and intermediary smoothing stage)<a class=headerlink href=#24-trajectory-smoothing-srctrackingmpc_trackerpy-and-intermediary-smoothing-stage title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Transform discrete waypoints from the planner into curvature-continuous, differentiable reference trajectories for MPC tracking.</p> <p><strong>Methods:</strong></p> <ul> <li>Uses <strong>arc-length reparameterization</strong> to obtain uniformly spaced reference samples.</li> <li>Applies <strong>centripetal Catmull–Rom interpolation</strong> (<span class=arithmatex>\(\alpha = 0.5\)</span>) to avoid overshooting near sharp turns.</li> <li>Validates post-smoothing path against the inflated corridor to preserve clearance constraints.</li> </ul> <p><strong>Output:</strong> A smooth trajectory with continuous position, curvature, and heading derivatives suitable for model-based control.</p> <hr> <h3 id=25-tracking-srctrackingmpc_trackerpy>2.5. Tracking (<code>src/tracking/mpc_tracker.py</code>)<a class=headerlink href=#25-tracking-srctrackingmpc_trackerpy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Perform constrained optimal control using <strong>Model Predictive Control (MPC)</strong>.</p> <p><strong>Implementation details:</strong></p> <ul> <li>Linearizes kinematic bicycle dynamics along the reference trajectory.</li> <li>Constructs discrete-time linear systems <span class=arithmatex>\(x_{k+1} = A_k x_k + B_k u_k + c_k\)</span>.</li> <li> <p>Solves a convex <strong>Quadratic Program (QP)</strong> formulated in CVXPY, incorporating:</p> </li> <li> <p>State and control cost terms <span class=arithmatex>\(\lVert x_k - x_k^{\mathrm{ref}} \rVert_Q^2\)</span>, <span class=arithmatex>\(\lVert u_k - u_k^{\mathrm{ref}} \rVert_R^2\)</span>,</p> </li> <li>Velocity, steering, and actuation constraints.</li> <li>Executes in <strong>receding-horizon fashion</strong>, applying only the first optimal control at each iteration.</li> </ul> <p><strong>Scientific outcome:</strong> Realizes real-time, constraint-aware vehicle control with guaranteed convexity and stability margins.</p> <hr> <h3 id=26-vehicle-model-srcvehiclebicyclepy>2.6. Vehicle Model (<code>src/vehicle/bicycle.py</code>)<a class=headerlink href=#26-vehicle-model-srcvehiclebicyclepy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Encapsulate the <strong>kinematic bicycle dynamics</strong> for both forward simulation and linearization.</p> <p><strong>Functionalities:</strong></p> <ul> <li>Provides analytic state-update equations for position, heading, and velocity.</li> <li>Computes curvature <span class=arithmatex>\(\kappa = \tan(\delta)/L\)</span>, slip ratio, and lateral acceleration.</li> <li>Supplies Jacobian matrices ( A, B ) for MPC linearization.</li> <li>Includes instrumentation to monitor numerical consistency of curvature and slip metrics.</li> </ul> <p><strong>Scientific contribution:</strong> Establishes a physically interpretable and mathematically tractable model for real-time control.</p> <hr> <h3 id=27-simulation-srcsimsimulatorpy>2.7. Simulation (<code>src/sim/simulator.py</code>)<a class=headerlink href=#27-simulation-srcsimsimulatorpy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Execute a <strong>closed-loop deterministic simulation</strong> integrating planning, tracking, and control under realistic dynamics.</p> <p><strong>Mechanism:</strong></p> <ul> <li>Uses a fixed-step deterministic integration loop for <span class=arithmatex>\(T / \Delta t\)</span> iterations.</li> <li>Sequentially invokes the MPC tracker, applies controls, updates vehicle states, and logs diagnostics.</li> <li>Terminates when vehicle velocity drops below a configurable threshold after reaching the end of the reference path.</li> </ul> <p><strong>Output:</strong> A structured <code>SimulationLog</code> containing per-step state vectors, control commands, MPC predictions, and tracking errors.</p> <p><strong>Scientific value:</strong> Enables repeatable experiments, convergence analysis, and consistent quantitative evaluation.</p> <hr> <h3 id=28-visualization-srcvis>2.8. Visualization (<code>src/vis/</code>)<a class=headerlink href=#28-visualization-srcvis title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Render simulation and planning outputs into interpretable figures and animations.</p> <p><strong>Components:</strong></p> <ul> <li><strong>Static dashboards:</strong> Combine map views, velocity and acceleration plots, steering, error metrics, and force diagrams.</li> <li><strong>Animated trajectories:</strong> Display vehicle evolution, MPC horizon predictions, and obstacle interaction in real time.</li> <li><strong>FMT debug visualizations:</strong> Illustrate sampling and tree expansion behavior for algorithmic inspection.</li> </ul> <p><strong>Scientific function:</strong> Provides reproducible visual evidence of planner and controller performance for publication or analysis.</p> <hr> <h3 id=29-logging-srccommonlogging_utilspy>2.9. Logging (<code>src/common/logging_utils.py</code>)<a class=headerlink href=#29-logging-srccommonlogging_utilspy title="Permanent link">&para;</a></h3> <p><strong>Purpose:</strong> Centralize logging configuration for all modules.</p> <p><strong>Features:</strong></p> <ul> <li>Uniform timestamping, module name tagging, and severity level formatting.</li> <li>Dual-channel logging: console output and synchronized <code>.log</code> files.</li> <li>Ensures perfect temporal alignment between runtime messages and stored simulation artifacts.</li> </ul> <p><strong>Result:</strong> Guarantees traceability and reproducibility across multiple experimental runs.</p> <hr> <h2 id=3-testing-and-validation>3. Testing and Validation<a class=headerlink href=#3-testing-and-validation title="Permanent link">&para;</a></h2> <p><strong>Location:</strong> <code>tests/</code></p> <p><strong>Coverage:</strong></p> <ul> <li><strong>Unit tests:</strong> Validate individual module correctness (mapping, dynamics, FMT connectivity, MPC feasibility).</li> <li><strong>Integration tests:</strong> Verify complete end-to-end functionality from configuration loading to visualization artifact generation.</li> <li>Includes both <strong>conservative</strong> (slow-speed, tight-clearance) and <strong>high-speed</strong> scenarios to test numerical stability and control robustness.</li> </ul> <p><strong>Scientific guarantee:</strong> Ensures every subsystem adheres to defined physical, mathematical, and numerical contracts under varying operating conditions.</p> <hr> <h2 id=4-summary>4. Summary<a class=headerlink href=#4-summary title="Permanent link">&para;</a></h2> <p>The <strong>System Architecture</strong> is engineered for modularity, determinism, and scientific reproducibility. Key architectural principles:</p> <ol> <li><strong>Isolated scientific domains:</strong> Each package encapsulates a single research concern.</li> <li><strong>Deterministic execution:</strong> Fixed-seed randomization and discretized integration grids eliminate non-determinism.</li> <li><strong>Explicit configuration contracts:</strong> YAML-driven dataclasses ensure transparency between configuration and execution.</li> <li><strong>Layered design:</strong> Separation of mapping, planning, control, and visualization enables targeted experimentation.</li> <li><strong>Comprehensive testing:</strong> Unit and integration coverage verify algorithmic correctness across conditions.</li> </ol> <p>This structured, modular framework supports research reproducibility, facilitates algorithmic substitution, and provides a robust foundation for autonomous system development and evaluation.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 30, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 30, 2025</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> <div class=md-social> <a href=https://github.com/CagriCatik/FMT-MPC target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.sections", "navigation.top", "content.code.copy", "content.action.edit"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.56dfad97.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js></script> <script src=../assets/js/math-init.js></script> </body> </html>